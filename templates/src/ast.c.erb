#include "rbs/ast.h"
#include <stdlib.h>

<%- nodes.each do |node| -%>
<%= node.c_type_name %> *<%= node.c_constructor_function_name %>(<%= node.constructor_params.map(&:parameter_decl).join(", ") %>) {
    <%= node.c_type_name %> *instance = malloc(sizeof(<%= node.c_type_name %>));

    *instance = (<%= node.c_type_name %>) {
        .base = (rbs_node_t) { .cached_ruby_value = ruby_value },
        <%- node.fields.each do |field| -%>
        .<%= field.name %> = <%= field.name %>,
        <%- end -%>
    };

    return instance;
}

<%- end -%>
