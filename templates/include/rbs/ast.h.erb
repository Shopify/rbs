#ifndef RBS__AST_H
#define RBS__AST_H

#include "ruby.h"

typedef struct rbs_node {
    VALUE cached_ruby_value;
} rbs_node_t;

<%- nodes.each do |node| -%>
typedef struct {
    rbs_node_t base;

    <%- node.fields.each do |field| -%>
    VALUE <%= field.name %>;
    <%- end -%>
} <%= node.c_type_name %>;

<%- end -%>

<%- nodes.each do |node| -%>
<%= node.c_type_name %> *<%= node.c_constructor_function_name %>(VALUE ruby_value, <%= node.fields.map { |field| "VALUE #{field.name}" }.join(", ") %>);
<%- end -%>

VALUE rbs_struct_to_ruby_value(rbs_node_t *instance);

#endif
